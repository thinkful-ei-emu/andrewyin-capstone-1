(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(45)},32:function(e,t,a){},33:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(23),o=a.n(c),s=a(8),u=(a(32),a(2)),l=a(3),i=a(5),h=a(4),m=a(6),p=a(13),f=(a(33),"http://localhost:8080/api"),d="capstone-key",b={saveAuthToken:function(e){window.localStorage.setItem(d,e)},getAuthToken:function(){return window.localStorage.getItem(d)},clearAuthToken:function(){window.localStorage.removeItem(d)},hasAuthToken:function(){return!!b.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))}},E=b;a(38);function v(){document.getElementById("sideNav").style.width="200px"}function j(){document.getElementById("sideNav").style.width="0"}var O=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{id:"navOpen",className:"nav-open"},n.a.createElement("span",{className:"hamburger",onClick:v},n.a.createElement("div",{className:"hamburger-bar"}),n.a.createElement("div",{className:"hamburger-bar"}),n.a.createElement("div",{className:"hamburger-bar"}))),n.a.createElement("nav",{id:"sideNav",className:"side-nav"},n.a.createElement("span",{className:"nav-close",onClick:j},n.a.createElement("button",{id:"closeBtn",className:"closeBtn"},"\xd7")),n.a.createElement(s.b,{to:"/characters"},n.a.createElement("button",{id:"characters",className:"nav-link",onClick:function(){return j()}},"Characters")),n.a.createElement(s.b,{to:"/characters/create"},n.a.createElement("button",{id:"create",className:"nav-link",onClick:function(){return j()}},"Create")),n.a.createElement(s.b,{to:"/"},n.a.createElement("button",{id:"logout",className:"nav-link",onClick:function(){return E.clearAuthToken()}},"Logout"))))},g=a(1),y=a.n(g),C=a(9),k=(a(40),function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("li",{className:"characterThumbnail"},n.a.createElement(s.b,{to:"/characters/".concat(this.props.charId)},n.a.createElement("p",null,this.props.charName),n.a.createElement("p",null,this.props.charRace),n.a.createElement("p",null,this.props.charClass)))}}]),t}(n.a.Component)),N=a(26),w={getAllCharacters:function(){var e=Object(C.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/characters"),{headers:{Authorization:"bearer ".concat(E.getAuthToken())}});case 2:return t=e.sent,e.abrupt("return",t.ok?t.json():t.json().then(function(e){return Promise.reject(e)}));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getCharacterById:function(){var e=Object(C.a)(y.a.mark(function e(t){var a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/characters/").concat(t),{headers:{Authorization:"bearer ".concat(E.getAuthToken())}});case 2:return a=e.sent,e.abrupt("return",a.ok?a.json():a.json().then(function(e){return Promise.reject(e)}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),addCharacter:function(){var e=Object(C.a)(y.a.mark(function e(t){var a,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/characters/create"),{method:"POST",headers:{"content-type":"application/json",Authorization:"bearer ".concat(E.getAuthToken())},body:JSON.stringify(Object(N.a)({},t))});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},x=n.a.createContext({characters:[],error:null,setError:function(){},clearError:function(){},setCharactersList:function(){}}),S=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={characters:[],error:null},a.setCharactersList=function(e){a.setState({characters:e})},a.setError=function(e){a.setState({error:e})},a.clearError=function(){a.setState({error:null})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={characters:this.state.characters,error:this.state.error,setError:this.setError,clearError:this.clearError,setCharactersList:this.setCharactersList};return n.a.createElement(x.Provider,{value:e},this.props.children)}}]),t}(n.a.Component),A=x,T=(a(41),function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getAllCharacters();case 3:t=e.sent,this.context.setCharactersList(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),this.context.setError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.context.characters.map(function(e,t){return n.a.createElement(k,{key:t,charId:e.charId,charName:e.charName,charRace:e.charRace,charClass:e.charClass,charDesc:e.charDesc})});return n.a.createElement("ul",{className:"characterList"},e)}}]),t}(n.a.Component));T.contextType=A;var F=T,B={charName:null,charRace:null,charClass:null,charDesc:null},I=n.a.createContext({character:B,error:null,setError:function(){},clearError:function(){},setChar:function(){},clearChar:function(){}}),L=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={character:B,error:null},a.setError=function(e){console.error(e),a.setState({error:e})},a.clearError=function(){a.setState({error:null})},a.setChar=function(e){a.setState({character:e})},a.clearChar=function(){a.setChar(B)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={character:this.state.character,error:this.state.error,setError:this.setError,clearError:this.clearError,setChar:this.setChar,clearChar:this.clearChar};return n.a.createElement(I.Provider,{value:e},this.props.children)}}]),t}(n.a.Component),D=I,P=(a(42),function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.charId,e.next=4,w.getCharacterById(t);case 4:a=e.sent,this.context.setChar(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.context.setError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.context.character;return n.a.createElement("div",{className:"characterSheet"},n.a.createElement("p",{id:"charName"},"Name: ".concat(e.charName)),n.a.createElement("p",{id:"charName"},"Race: ".concat(e.charRace)),n.a.createElement("p",{id:"charName"},"Class: ".concat(e.charClass)),n.a.createElement("p",{id:"charName"},"Description: ".concat(e.charDesc)))}}]),t}(n.a.Component));P.contextType=D;var R=P,J=(a(43),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).addCharacter=function(e){w.addCharacter(e)},a.resetFields=function(){document.getElementById("charName").value="",document.getElementById("charRace").value="",document.getElementById("charClass").value="",document.getElementById("charDesc").value=""},a.handleFormSubmit=function(e){e.preventDefault();var t=e.target.charName.value,r=e.target.charRace.value,n=e.target.charClass.value,c=e.target.charDesc.value;a.addCharacter({charName:t,charRace:r,charClass:n,charDesc:c}),a.resetFields()},a.cancelButtonClick=function(e){a.resetFields()},a.state={tabOptions:["details","equipment","abilityScores","classFeatures","spellsList"],currentActive:"details"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{className:"characterCreateForm",onSubmit:this.handleFormSubmit},n.a.createElement("label",{htmlFor:"charName"},"Name: "),n.a.createElement("input",{type:"text",id:"charName",name:"charName"}),n.a.createElement("br",null),n.a.createElement("label",{htmlFor:"charRace"},"Race: "),n.a.createElement("input",{type:"text",id:"charRace",name:"charRace"}),n.a.createElement("br",null),n.a.createElement("label",{htmlFor:"charClass"},"Class: "),n.a.createElement("input",{type:"text",id:"charClass",name:"charClass"}),n.a.createElement("br",null),n.a.createElement("label",{htmlFor:"charDesc"},"Description: "),n.a.createElement("textarea",{id:"charDesc",name:"charDesc"}),n.a.createElement("br",null),n.a.createElement("section",{className:"submitSection"},n.a.createElement("button",{type:"submit"},"Submit"),n.a.createElement("button",{type:"button",onClick:this.cancelButtonClick},"Cancel")))}}]),t}(n.a.Component)),W={postLogin:function(){var e=Object(C.a)(y.a.mark(function e(t){var a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a.ok?a.json():a.json().then(function(e){return Promise.reject(e)}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),postUser:function(){var e=Object(C.a)(y.a.mark(function e(t){var a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a.ok?a.json():a.json().then(function(e){return Promise.reject(e)}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).handleSubmitJWTAuth=function(){var e=Object(C.a)(y.a.mark(function e(t){var r,n,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({error:null}),r=t.target,n=r.userName,c=r.password,e.prev=3,e.next=6,W.postLogin({userName:n.value,password:c.value});case 6:o=e.sent,n.value="",c.value="",E.saveAuthToken(o.authToken),a.props.onLoginSuccess(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0);case 16:case"end":return e.stop()}},e,null,[[3,13]])}));return function(t){return e.apply(this,arguments)}}(),a.state={error:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.error;return n.a.createElement("form",{className:"loginForm",onSubmit:this.handleSubmitJWTAuth},n.a.createElement("section",{className:"errorSection"},e&&n.a.createElement("p",{className:"red"},e)),n.a.createElement("label",{htmlFor:"userName"},"Username:"),n.a.createElement("input",{required:!0,type:"text",id:"userName",name:"userName"}),n.a.createElement("br",null),n.a.createElement("label",{htmlFor:"password"},"Password:"),n.a.createElement("input",{required:!0,type:"password",id:"password",name:"password"}),n.a.createElement("br",null),n.a.createElement("section",{className:"buttonSection"},n.a.createElement("button",{className:"loginButton",type:"submit"},"Login"),n.a.createElement("input",{className:"loginButton",type:"reset",value:"Clear"})))}}]),t}(n.a.Component);q.defaultProps={onLoginSuccess:function(){}};var z=q,M=(a(44),function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).onLoginSuccess=function(){var e=a.props,t=e.location,r=e.history,n=(t.state||{}).from||"/";r.push(n)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("section",{className:"loginPage"},n.a.createElement("fieldset",null,n.a.createElement("legend",null,n.a.createElement("h2",null,"Login")),n.a.createElement(z,{onLoginSuccess:this.onLoginSuccess})))}}]),t}(n.a.Component));M.defaultProps={location:{},history:{push:function(){}}};var U=M;var $=function(){return n.a.createElement("section",{className:"NotFoundPage"},n.a.createElement("h2",null,"404 - Page Not Found"))},G=a(16);function H(e){var t=e.component,a=Object(G.a)(e,["component"]),r=t;return n.a.createElement(p.b,Object.assign({},a,{render:function(e){return E.hasAuthToken()?n.a.createElement(p.a,{to:"/characters"}):n.a.createElement(r,e)}}))}function K(e){var t=e.component,a=Object(G.a)(e,["component"]),r=t;return n.a.createElement(p.b,Object.assign({},a,{render:function(e){return E.hasAuthToken()?n.a.createElement(r,e):n.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}function Q(e){return n.a.createElement(p.b,Object.assign({},e,{render:function(e){return E.hasAuthToken()?n.a.createElement(p.a,{to:{pathname:"/characters",state:{from:e.location}}}):n.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var V=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(p.b,{path:"/characters",component:O}),n.a.createElement("section",{className:"app"},n.a.createElement(p.d,null,n.a.createElement(p.b,{exact:!0,path:"/",component:Q}),n.a.createElement(H,{exact:!0,path:"/login",component:U}),n.a.createElement(K,{exact:!0,path:"/characters",component:F}),n.a.createElement(K,{exact:!0,path:"/characters/create",component:J}),n.a.createElement(K,{path:"/characters/:charId",component:R}),n.a.createElement(p.b,{component:$}))))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(s.a,null,n.a.createElement(S,null,n.a.createElement(L,null,n.a.createElement(V,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,1,2]]]);
//# sourceMappingURL=main.63b41d5e.chunk.js.map